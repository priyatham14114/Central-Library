sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/Token","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,i,o,s){"use strict";return e.extend("com.app.centrallibrary.controller.userView",{onInit:function(){const e=new n({ReserverdUserName:"",ReserverdUserId:"",ReserverdBook:""});this.getView().setModel(e,"newReservationModel");const t=this.getOwnerComponent().getRouter();t.attachRoutePatternMatched(this.onCurrentUserDetails,this)},onCurrentUserDetails:function(e){const{userId:t}=e.getParameter("arguments");this.ID=t;const n=e.getParameter("name");const i=this.getView().byId("idUserDataPage");i.bindElement(`/UserLogin(${t})`,{expand:""})},onLogoutPress:function(){debugger;const e=this.getOwnerComponent().getRouter();e.navTo("RouteloginView")},onRefresh:function(){this.getView().byId("idBooksTable").getBinding("items").refresh()},onReserveBookPress:async function(){debugger;const e=this.getView();var n=this.byId("idBooksTable").getSelectedItem(),i=n.getBindingContext().getObject().availableQuantity;if(n){var i=n.getBindingContext().getObject().availableQuantity,o=n.getBindingContext().getObject().title,s=e.byId("idUserName").getText(),r=e.byId("idUserIdLink").getText();if(i==="0"){const n=e.getModel().bindList("/Reservations");n.create({ReserverdUserName:s,ReserverdUserId:r,ReserverdBook:o});t.show("Reservation Sent to Admin")}else{t.show("Book is available you don't need to reserve")}}},onFilterCilck:function(){const e=this.getView(),t=e.byId("idUserActiveLoanTable"),n=e.byId("idUserInputValue").getValue();var i=[];n?i.push(new o("borrowerName",s.EQ,n)):"";t.getBinding("items").filter(i)}})});